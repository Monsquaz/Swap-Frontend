(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{104:function(e,n,i){"use strict";i.r(n);var t=i(105),a=i.n(t);for(var r in t)"default"!==r&&function(e){i.d(n,e,function(){return t[e]})}(r);n.default=a.a},105:function(e,n,i){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i(188),i(189),i(190),i(191),i(192),i(193),i(194),i(195),i(196),i(197),i(198),i(199),i(102),i(200),i(201);var a=r(i(202));r(i(22));function r(e){return e&&e.__esModule?e:{default:e}}function s(e){if(Array.isArray(e)){for(var n=0,i=Array(e.length);n<e.length;n++)i[n]=e[n];return i}return Array.from(e)}var o=function(e,n){return function(i,r,o,d){var l=this,u=new FormData;if(o.length){Array.from(Array(o.length).keys()).map(function(e){u.append(r,o[e],o[e].name)});var c=localStorage.getItem("authToken"),m=e(i);a.default.post(m,u,{headers:{authorization:c?"Bearer "+c:""}}).then(function(e){var i=e.data,a=[].concat(s(n));"object"!=(void 0===i?"undefined":t(i))?a=["Error",i,"error"]:200!=i.code&&(a=["Error",i.message,"error"]),l.$swal.apply(l,s(a)),d&&d.refetch()})}}};e.exports={name:"event-page",props:{},data:function(){return{eventsQuery:i(78),usersQuery:i(80),apiUrl:"https://swap.monsquaz.org:4000",error:null,message:null,expanded:!1,skipRoundsubmissionMutation:i(107),leaveEventMutation:i(221),joinMutation:i(222),inviteMutation:i(223),publishMutation:i(224),nextRoundMutation:i(225),startEventMutation:i(226),cancelEventMutation:i(227),event:null}},computed:{schedule:function(){return this.getSchedule(this.event)},currentUrl:function(){return window.location.href.split("?")[0]},variables:function(){return{details:!0,filters:{slug:this.$route.params.slug}}}},apollo:{currentUser:{query:i(21)}},methods:{cancelEvent:function(e,n){var i=this;this.$swal({title:"You are about to cancel the event",html:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, unfortunately!"}).then(function(t){t.value&&i.$apollo.mutate({mutation:i.cancelEventMutation,variables:{id:e.id}}).then(function(e){n.refetch(),setTimeout(function(){location.href="/events"},2e3)})})},didParticipate:function(e){var n=this;return!!this.currentUser&&this.event.roundsubmissions.find(function(e){return e.participant.id==n.currentUser.id&&"Completed"==e.status})},canSkipRemaining:function(e){var n=this;return!!this.currentUser&&(!!["Started","FillInAquired","Refuted"].includes(e.currentRoundsubmission.status)&&e.roundsubmissions.filter(function(e){return e.originalParticipant.id==n.currentUser.id}).length==e.numRounds)},skipRemaining:function(e,n){var i=this;this.$swal({title:"You are about to skip all remaining rounds",html:"You are about to skip the remaining rounds of <b>"+e.name+"</b><br />.\n        This means that you cannot contribute any further.\n        Only do this if you are certain that you can't contribute regardless of what song you will receive.<br />\n        Are you absolutely sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, goodbye!"}).then(function(t){t.value&&e.roundsubmissions.filter(function(e){return e.participant.id==i.currentUser.id&&!["Submitted","Completed","Skipped"].includes(e.status)}).reduce(function(e,n){return e.then(function(e){return i.$apollo.mutate({mutation:i.skipRoundsubmissionMutation,variables:{id:n.id}})})},Promise.all([])).then(function(e){n.refetch()})})},requestFillIns:function(e,n){var i=this;this.$swal({title:"You are about to request fill-ins",html:"You are about to request fill-ins for all\n        submissions that aren't submitted yet.\n        <br /><br />Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, unfortunately!"}).then(function(t){t.value&&e.roundsubmissions.filter(function(n){return n.round.index==e.currentRound.index&&!["Planned","Submitted","Completed","Skipped"].includes(n.status)}).map(function(n){return{id:n.id,numSkips:e.roundsubmissions.reduce(function(e,i){return i.song_id==n.song_id&&"Skipped"==i.status&&e++,e},0),timesFilledIn:e.roundsubmissions.reduce(function(e,i){return i.song_id==n.song_id&&i.participant.id!=i.originalParticipant.id&&e++,e},0)}}).sort(function(e,n){return e.numSkips>n.numSkips?1:e.numSkips<n.numSkips?-1:e.timesFilledIn>n.timesFilledIn?-1:e.timesFilledIn<n.timesFilledIn?1:0}).reduce(function(e,n){return e.then(function(e){return i.$apollo.mutate({mutation:i.skipRoundsubmissionMutation,variables:{id:n.id}})})},Promise.all([])).then(function(e){n.refetch()})})},sizeToggle:function(){this.expanded=!this.expanded},downloadWithAuth:function(e,n){var i=new XMLHttpRequest;i.open("GET",e,!0);var t=localStorage.getItem("authToken");t&&(i.setRequestHeader("Authorization","Bearer "+t),i.setRequestHeader("Content-type","application/x-www-form-urlencoded")),i.responseType="arraybuffer",i.onload=function(e){if(200===this.status){var i=new Blob([this.response]),t=document.createElement("a");t.href=window.URL.createObjectURL(i),document.body.appendChild(t),t.download=n,t.click(),setTimeout(function(){document.body.removeChild(t)},1)}},i.onerror=function(e){console.warn("error",e)},i.send()},submitChanges:o(function(e){return"https://swap.monsquaz.org:4000/roundsubmissions/"+e+"/file"},["Uploaded!","You've submitted a file for this round","success"]),changeInitial:o(function(e){return"https://swap.monsquaz.org:4000/events/"+e+"/file"},["Uploaded!","Initial file was uploaded!","success"]),img:function(e){return'<img src="'+e+'" />'},userLinker:function(e){return"/users/"+e.slug},formatText:function(e){return e.replace(/(?:\r\n|\r|\n)/g,"<br />")},onError:function(e){this.error=e,this.message=""},onDone:function(e){var n=e.data;this.error="",this.message=n[Object.keys(n)[0]].message},onResult:function(e){var n=e.data;this.event=n.events[0]},refetchEvent:function(){return["Events"]},joinEvent:function(e,n){var i=void 0;i="Planned"==e.status?"You are about to join the event <b>"+e.name+"</b>.\n        This means that you're expected to contribute on every file that you're assigned.<br /><br />\n        Are you absolutely sure?":"You are about to join the event <b>"+e.name+" as a fill in</b>.\n        This means that you're expected to contribute to the files you are assigned to.<br /><br />\n        Are you absolutely sure?",this.$swal({title:"You are about to join an event.",html:i,type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, I'm up for it!"}).then(function(e){e.value&&n()})},inviteUser:function(e,n){var i=this;this.$swal({title:"Username to invite",input:"text",showCancelButton:!0,inputValidator:function(e){return!e&&"You need to write something!"}}).then(function(t){t.value&&i.$apollo.query({query:i.usersQuery,variables:{filters:{username:t.value}}}).then(function(a){if(1==a.data.users.length){var r=a.data.users[0];console.warn("user",r),n({variables:{eventId:e.id,userId:r.id}}).then(function(){i.error=null,i.message=t.value+" was invited successfully",i.eventsQuery.refetch()})}else i.message=null,i.error={message:"Couldn't find user "+t.value+'". Username is case sensitive.'}})})},leaveEvent:function(e,n){this.$swal({title:"You are about to leave the event.",html:"You are about to stop participating in "+e.name+"<br /><br />\n        Are you absolutely sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, sorry!"}).then(function(e){e.value&&n()})},skipRoundsubmission:function(e,n){this.$swal({title:"You are about to skip your round.",html:"You are about to skip round <b>"+(e.currentRound.index+1)+"</b> of <b>"+e.name+"</b><br />.\n        This means that someone else will get to fill in for you, or possibly,\n        that no contribution will be made for this round.<br />\n        Are you absolutely sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, sorry!"}).then(function(e){e.value&&n()})},startEvent:function(e,n){this.$swal({title:"You are about to start the event.",html:"You are about to start the event <b>"+e.name+"</b>.\n        This means that the swap schedule will be generated based on currently signed up participants,\n        and the first round will immediately start.\n        Are you absolutely sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, I'm up for it!"}).then(function(e){e.value&&n()})},nextEventRound:function(e,n){this.$swal({title:"You are about to end the current round.",html:"You are about to end round <b>"+(e.currentRound.index+1)+"</b> of <b>"+e.name+"</b>.<br />\n        The next round will be started immediately. Songs without contributions will be skipped.<br />\n        Are you absolutely sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, on to next round!"}).then(function(e){e.value&&n()})},publishEvent:function(e,n){this.$swal({title:"You are about to publish the event.",html:"You are about to publish <b>"+e.name+"</b>.<br />\n        This means that everyone who can see this event also get to see the schedule and download all the files.<br /><br />\n        Are you absolutely sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, release it"}).then(function(e){e.value&&n()})},submissionStatuses:function(e){return e.currentRound?e.roundsubmissions.filter(function(n){return n.round.index==e.currentRound.index}).reduce(function(e,n){return n.status in e?e[n.status]++:e[n.status]=1,e},{}):{}},showRequestFillIns:function(e){return"Started"==e.status&&(!!e.currentRound&&e.roundsubmissions.filter(function(n){return n.round.index==e.currentRound.index}).find(function(e){return["Started","Refuted"].includes(e.status)}))},getSchedule:function(e){var n=new Array(e.numRounds).fill(null).map(function(){return new Array(e.numRounds).fill({title:"?"})}),i={},t=0;return e.roundsubmissions.reduce(function(e,n){return n.song.id in i||(i[n.song.id]=t++),e[n.round.index][i[n.song.id]]={id:n.id,class:n.status.toLowerCase(),title:n.participant.username},e},n)}},metaInfo:function(){return{title:function(){return"Event"},meta:[{name:"description",content:"Event details"}]}}}},107:function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SkipRoundsubmission"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"skipRoundsubmission"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:107}};i.loc.source={body:"mutation SkipRoundsubmission($id: ID!) {\r\n  skipRoundsubmission(id: $id) {\r\n    code\r\n    message\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}i.definitions.forEach(function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})}(e,n),t[e.name.value]=n}}),e.exports=i,e.exports.SkipRoundsubmission=function(e,n){var i={kind:e.kind,definitions:[a(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);for(var r=t[n]||new Set,s=new Set,o=new Set(r);o.size>0;){var d=o;o=new Set,d.forEach(function(e){s.has(e)||(s.add(e),(t[e]||new Set).forEach(function(e){o.add(e)}))})}return s.forEach(function(n){var t=a(e,n);t&&i.definitions.push(t)}),i}(i,"SkipRoundsubmission")},108:function(e,n,i){var t=i(229);"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);(0,i(10).default)("23881563",t,!0,{})},221:function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"LeaveEvent"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"leaveEvent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:89}};i.loc.source={body:"mutation LeaveEvent($id: ID!) {\r\n  leaveEvent(id: $id) {\r\n    code\r\n    message\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}i.definitions.forEach(function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})}(e,n),t[e.name.value]=n}}),e.exports=i,e.exports.LeaveEvent=function(e,n){var i={kind:e.kind,definitions:[a(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);for(var r=t[n]||new Set,s=new Set,o=new Set(r);o.size>0;){var d=o;o=new Set,d.forEach(function(e){s.has(e)||(s.add(e),(t[e]||new Set).forEach(function(e){o.add(e)}))})}return s.forEach(function(n){var t=a(e,n);t&&i.definitions.push(t)}),i}(i,"LeaveEvent")},222:function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"JoinEvent"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"joinEvent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:87}};i.loc.source={body:"mutation JoinEvent($id: ID!) {\r\n  joinEvent(id: $id) {\r\n    code\r\n    message\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}i.definitions.forEach(function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})}(e,n),t[e.name.value]=n}}),e.exports=i,e.exports.JoinEvent=function(e,n){var i={kind:e.kind,definitions:[a(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);for(var r=t[n]||new Set,s=new Set,o=new Set(r);o.size>0;){var d=o;o=new Set,d.forEach(function(e){s.has(e)||(s.add(e),(t[e]||new Set).forEach(function(e){o.add(e)}))})}return s.forEach(function(n){var t=a(e,n);t&&i.definitions.push(t)}),i}(i,"JoinEvent")},223:function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"InviteUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"eventId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"inviteUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"params"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"eventId"},value:{kind:"Variable",name:{kind:"Name",value:"eventId"}}},{kind:"ObjectField",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:147}};i.loc.source={body:"mutation InviteUser($eventId: ID!, $userId: ID!) {\r\n  inviteUser(params: { eventId: $eventId, userId: $userId }) {\r\n    code\r\n    message\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}i.definitions.forEach(function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})}(e,n),t[e.name.value]=n}}),e.exports=i,e.exports.InviteUser=function(e,n){var i={kind:e.kind,definitions:[a(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);for(var r=t[n]||new Set,s=new Set,o=new Set(r);o.size>0;){var d=o;o=new Set,d.forEach(function(e){s.has(e)||(s.add(e),(t[e]||new Set).forEach(function(e){o.add(e)}))})}return s.forEach(function(n){var t=a(e,n);t&&i.definitions.push(t)}),i}(i,"InviteUser")},224:function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PublishEvent"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"publishEvent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:93}};i.loc.source={body:"mutation PublishEvent($id: ID!) {\r\n  publishEvent(id: $id) {\r\n    code\r\n    message\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}i.definitions.forEach(function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})}(e,n),t[e.name.value]=n}}),e.exports=i,e.exports.PublishEvent=function(e,n){var i={kind:e.kind,definitions:[a(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);for(var r=t[n]||new Set,s=new Set,o=new Set(r);o.size>0;){var d=o;o=new Set,d.forEach(function(e){s.has(e)||(s.add(e),(t[e]||new Set).forEach(function(e){o.add(e)}))})}return s.forEach(function(n){var t=a(e,n);t&&i.definitions.push(t)}),i}(i,"PublishEvent")},225:function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"NextEventRound"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nextEventRound"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:98}};i.loc.source={body:"mutation NextEventRound ($id: ID!) {\r\n  nextEventRound(id: $id) {\r\n    code\r\n    message\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}i.definitions.forEach(function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})}(e,n),t[e.name.value]=n}}),e.exports=i,e.exports.NextEventRound=function(e,n){var i={kind:e.kind,definitions:[a(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);for(var r=t[n]||new Set,s=new Set,o=new Set(r);o.size>0;){var d=o;o=new Set,d.forEach(function(e){s.has(e)||(s.add(e),(t[e]||new Set).forEach(function(e){o.add(e)}))})}return s.forEach(function(n){var t=a(e,n);t&&i.definitions.push(t)}),i}(i,"NextEventRound")},226:function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"StartEvent"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"startEvent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:89}};i.loc.source={body:"mutation StartEvent($id: ID!) {\r\n  startEvent(id: $id) {\r\n    code\r\n    message\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}i.definitions.forEach(function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})}(e,n),t[e.name.value]=n}}),e.exports=i,e.exports.StartEvent=function(e,n){var i={kind:e.kind,definitions:[a(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);for(var r=t[n]||new Set,s=new Set,o=new Set(r);o.size>0;){var d=o;o=new Set,d.forEach(function(e){s.has(e)||(s.add(e),(t[e]||new Set).forEach(function(e){o.add(e)}))})}return s.forEach(function(n){var t=a(e,n);t&&i.definitions.push(t)}),i}(i,"StartEvent")},227:function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CancelEvent"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cancelEvent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:91}};i.loc.source={body:"mutation CancelEvent($id: ID!) {\r\n  cancelEvent(id: $id) {\r\n    code\r\n    message\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}i.definitions.forEach(function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})}(e,n),t[e.name.value]=n}}),e.exports=i,e.exports.CancelEvent=function(e,n){var i={kind:e.kind,definitions:[a(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);for(var r=t[n]||new Set,s=new Set,o=new Set(r);o.size>0;){var d=o;o=new Set,d.forEach(function(e){s.has(e)||(s.add(e),(t[e]||new Set).forEach(function(e){o.add(e)}))})}return s.forEach(function(n){var t=a(e,n);t&&i.definitions.push(t)}),i}(i,"CancelEvent")},228:function(e,n,i){"use strict";var t=i(108);i.n(t).a},229:function(e,n,i){(e.exports=i(9)(!1)).push([e.i,"\n.expander[data-v-a1f7f566]{float:right;position:relative;top:-20px;right:-15px;cursor:pointer\n}\n.expander.active[data-v-a1f7f566]{top:-20px;right:10px\n}\n@media screen and (max-width: 768px){\n.expander[data-v-a1f7f566]{display:none\n}\n}\n.notification[data-v-a1f7f566]{padding:5px\n}\n.participation-join[data-v-a1f7f566]{text-align:center;padding:15px\n}\n.join-button[data-v-a1f7f566]{margin-top:15px\n}\n.card-title[data-v-a1f7f566]{font-weight:bold;border-bottom:1px solid #c0c0c0\n}\n.card-title-2[data-v-a1f7f566]{margin-top:15px\n}\n.event-description[data-v-a1f7f566]{margin-top:15px\n}\n.event-actions[data-v-a1f7f566]{text-align:center;overflow:auto;text-align:center\n}\n.roundsubmission-actions[data-v-a1f7f566]{text-align:center;overflow:auto;text-align:center\n}\n.roundsubmission-actions>div[data-v-a1f7f566]{display:inline-block\n}\n.roundsubmission-actions .button[data-v-a1f7f566]{margin-right:5px;margin-top:5px\n}\n.participant[data-v-a1f7f566]{padding:5px;padding-bottom:0px;overflow:auto\n}\n.participant .participant-username[data-v-a1f7f566]{display:inline;float:left;margin-top:10px;margin-right:10px\n}\n.button .icon[data-v-a1f7f566]:first-child:last-child{margin-right:auto\n}\n.comments[data-v-a1f7f566]{margin-top:25px\n}\n",""])},276:function(e,n,i){"use strict";var t=function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("ApolloQuery",{staticClass:"events",attrs:{query:e.eventsQuery,variables:e.variables},on:{result:e.onResult,error:e.onError},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.query,a=n.result,r=a.data,s=a.loading;return[r&&!s?[i("div",[i("hero",{attrs:{title:"Event: "+e.event.name,subtitle:"Hosted by "+e.event.host.username}}),e._v(" "),i("div",{staticClass:"columns is-centered"},[i("section",{class:{"content-box":!0,column:!0,"is-two-thirds":!e.expanded,"is-full":e.expanded}},[i("div",{class:{expander:!0,active:e.expanded},on:{click:e.sizeToggle}},[i("icon",{attrs:{name:e.expanded?"compress":"expand",scale:"1"}})],1),e._v(" "),e.error?i("div",{staticClass:"notification is-danger"},[e._v("\n              "+e._s(e.error.message)+"\n            ")]):e._e(),e._v(" "),e.message?i("div",{staticClass:"notification is-info"},[e._v("\n              "+e._s(e.message)+"\n            ")]):e._e(),e._v(" "),i("div",{staticClass:"columns"},[i("div",{staticClass:"column is-half event-details"},[i("div",{staticClass:"card-title"},[e._v("Event details")]),e._v(" "),i("table",{staticClass:"table"},[i("tr",[i("th",[e._v("Status")]),i("td",[e._v(e._s(e.event.status))])]),e._v(" "),i("tr",[i("th",[e._v("Number of participants")]),i("td",[e._v(e._s(e.event.numParticipants))])]),e._v(" "),e.event.numRounds?i("tr",[i("th",[e._v("Number of rounds")]),e._v(" "),i("td",[e._v(e._s(e.event.numRounds))])]):e._e(),e._v(" "),e.event.currentRound?i("tr",[i("th",[e._v("Current round")]),e._v(" "),i("td",[e._v(e._s(e.event.currentRound.index+1))])]):e._e(),e._v(" "),i("tr",[i("th",[e._v("Public event")]),i("td",[e._v(e._s(e.event.isPublic?"Yes":"No"))])]),e._v(" "),i("tr",[i("th",[e._v("Public schedule")]),i("td",[e._v(e._s(e.event.isScheduleVisible?"Yes":"No"))])]),e._v(" "),i("tr",[i("th",[e._v("Public changes")]),i("td",[e._v(e._s(e.event.areChangesVisible?"Yes":"No"))])]),e._v(" "),e.event.initialFile?i("tr",[i("th",[e._v("Initial file")]),e._v(" "),i("td",[i("a",{on:{click:function(n){n.preventDefault(),e.downloadWithAuth(""+e.apiUrl+e.event.initialFile.downloadUrl,e.event.initialFile.filename)}}},[e._v("\n                        "+e._s(e.event.initialFile.filename)+"\n                    ")])])]):e._e()]),e._v(" "),e.event.isAdministrator?i("div",{staticClass:"event-actions"},[i("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Edit event details",expression:"'Edit event details'"}],staticClass:"button",attrs:{href:"#"},on:{click:function(n){n.preventDefault(),e.$router.push({path:"/events/"+e.event.slug+"/edit"})}}},[i("span",{staticClass:"icon"},[i("icon",{attrs:{name:"edit",scale:"1"}})],1),e._v("\n                     Edit event\n                   ")]),e._v(" "),"Planned"==e.event.status?i("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Cancel the event before it's started",expression:"'Cancel the event before it\\'s started'"}],staticClass:"button",attrs:{href:"#"},on:{click:function(n){n.preventDefault(),e.cancelEvent(e.event,t)}}},[i("span",{staticClass:"icon"},[i("icon",{attrs:{name:"ban",scale:"1"}})],1),e._v("\n                     Cancel event\n                   ")]):e._e()]):e._e()]),e._v(" "),i("div",{staticClass:"event-participants column is-half"},[i("div",{staticClass:"card-title"},[e._v("Participants")]),e._v(" "),0==e.event.numParticipants?[e._v("\n                  None, yet\n                ")]:[i("paginator",{attrs:{resource:"users",query:e.usersQuery,"show-headers":!1,headers:[{field:"username",title:"Username",sortable:!0}],linker:e.userLinker,sort:"username",descending:!1,filters:{id:e.event.participants.map(function(e){return e.id})}}})],e._v(" "),!e.event.isPublic&&e.event.isAdministrator?[i("div",{staticClass:"card-title card-title-2"},[e._v("Invitations")]),e._v(" "),0==e.event.numParticipants?[e._v("\n                    None, yet\n                  ")]:e._e(),e._v(" "),i("paginator",{attrs:{resource:"users",query:e.usersQuery,"show-headers":!1,headers:[{field:"username",title:"Username",sortable:!0}],linker:e.userLinker,sort:"username",descending:!1,filters:{id:e.event.invitedUsers.filter(function(n){return!e.event.participants.find(function(e){return n.id==e.id})}).map(function(e){return e.id})}}})]:e._e()],2)]),e._v(" "),i("div",{staticClass:"columns"},[i("div",{class:{"event-current-roundsubmission":!0,column:!0,"is-full":!e.event.isAdministrator,"is-half":e.event.isAdministrator}},[i("div",{staticClass:"card-title"},[e._v("Participation")]),e._v(" "),["Completed","Published"].includes(e.event.status)?[e._v("\n                    The event has ended.\n                    "),e.event.isParticipant&&e.didParticipate(e.event)?[e._v("\n                      Thank you for taking part!\n                    ")]:e._e()]:!e.event.currentRoundsubmission&&e.event.isParticipant?i("div",["Planned"==e.event.status?i("ApolloMutation",{attrs:{mutation:e.leaveEventMutation,variables:{id:e.event.id},refetchQueries:e.refetchEvent},on:{error:e.onError,done:e.onDone},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.mutate;n.loading,n.error,n.gqlError;return[i("div",{staticClass:"roundsubmission-actions"},[i("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Undo signing up for this event",expression:"'Undo signing up for this event'"}],staticClass:"button is-warning",attrs:{href:"#"},on:{click:function(n){n.preventDefault(),e.leaveEvent(e.event,t)}}},[i("span",{staticClass:"icon"},[i("icon",{attrs:{name:"sign-out-alt",scale:"1"}})],1),e._v("\n                            Leave event\n                          ")])])]}}])}):[e._v("\n                      Not currently in a round\n                    ")]],2):e._e(),e._v(" "),e.event.currentRoundsubmission&&e.event.isParticipant?i("div",["Planned"==e.event.status?[e._v("\n                      You're signed up as an ordinary participant.\n                    ")]:"Started"==e.event.status?[i("table",{staticClass:"table"},[e.event.currentRound?i("tr",[i("th",[e._v("Round")]),i("td",[e._v(e._s(e.event.currentRound.index+1))])]):e._e(),e._v(" "),i("tr",[i("th",[e._v("Status")]),i("td",[e._v(e._s(e.event.currentRoundsubmission.status))])]),e._v(" "),e.event.currentRoundsubmission.fileSubmitted?i("tr",[i("th",[e._v("Submitted file")]),e._v(" "),i("td",[i("a",{on:{click:function(n){n.preventDefault(),e.downloadWithAuth(""+e.apiUrl+e.event.currentRoundsubmission.fileSubmitted.downloadUrl,e.event.currentRoundsubmission.fileSubmitted.filename)}}},[e._v("\n                              "+e._s(e.event.currentRoundsubmission.fileSubmitted.filename)+"\n                          ")])])]):e._e()]),e._v(" "),i("div",{staticClass:"roundsubmission-actions"},[e.event.currentRoundsubmission&&e.event.currentRoundsubmission.fileSeeded?i("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Download the file that has been assigned to you for this round",expression:"'Download the file that has been assigned to you for this round'"}],staticClass:"button is-info",on:{click:function(n){n.preventDefault(),e.downloadWithAuth(""+e.apiUrl+e.event.currentRoundsubmission.fileSeeded.downloadUrl,e.event.currentRoundsubmission.fileSeeded.filename)}}},[i("span",{staticClass:"icon"},[i("icon",{attrs:{name:"download",scale:"1"}})],1),e._v("\n                            Download your file\n                          ")]):e._e(),e._v(" "),e.currentUser&&["Started","Submitted","FillInAquired","Refuted"].includes(e.event.currentRoundsubmission.status)?i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Submit your file. Note: You may re-upload until the round has ended.",expression:"'Submit your file. Note: You may re-upload until the round has ended.'"}],staticClass:"file button is-primary"},[i("label",{staticClass:"file-label",staticStyle:{"margin-top":"-5px"}},[i("form",{attrs:{enctype:"multipart/form-data",novalidate:""}},[i("input",{staticClass:"file-input",attrs:{type:"file",name:"initial"},on:{change:function(n){e.submitChanges(e.event.currentRoundsubmission.id,n.target.name,n.target.files,t)}}})]),e._v(" "),i("span",{staticClass:"file-cta",staticStyle:{"margin-top":"-1px"}},[i("span",{staticClass:"file-label"},[i("span",{staticClass:"icon"},[i("icon",{attrs:{name:"upload",scale:"1"}})],1),e._v("\n                                  "+e._s("Submitted"==e.event.currentRoundsubmission.status?"Resubmit":"Submit")+" your changes\n                                ")])])])]):e._e(),e._v(" "),e.currentUser&&["Started","FillInAquired","Refuted"].includes(e.event.currentRoundsubmission.status)?i("ApolloMutation",{attrs:{mutation:e.skipRoundsubmissionMutation,variables:{id:e.event.currentRoundsubmission.id},refetchQueries:e.refetchEvent},on:{error:e.onError,done:e.onDone},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.mutate;n.loading,n.error,n.gqlError;return[i("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Mark the round as skipped so a fill-in participant can take your place for this round",expression:"'Mark the round as skipped so a fill-in participant can take your place for this round'"}],staticClass:"button is-warning",attrs:{href:"#"},on:{click:function(n){n.preventDefault(),e.skipRoundsubmission(e.event,t)}}},[i("span",{staticClass:"icon"},[i("icon",{attrs:{name:"fast-forward",scale:"1"}})],1),e._v("\n                                Skip this round\n                              ")])]}}])}):e._e(),e._v(" "),e.canSkipRemaining(e.event)?i("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Quit the event. Avoid doing this.",expression:"'Quit the event. Avoid doing this.'"}],staticClass:"button is-danger",attrs:{href:"#"},on:{click:function(n){n.preventDefault(),e.skipRemaining(e.event,t)}}},[i("span",{staticClass:"icon"},[i("icon",{attrs:{name:"frown",scale:"1"}})],1),e._v("\n                            Skip remaining rounds\n                          ")]):e._e()],1)]:e._e()],2):e._e(),e._v(" "),!e.event.isParticipant&&["Planned","Started"].includes(e.event.status)?i("div",{staticClass:"participation-join"},[e.currentUser?["Planned"==e.event.status?i("p",[e._v("\n                        Sign up as an ordinary participant."),i("br"),e._v("You'll be assigned one file per round.\n                      ")]):i("p",[e._v("\n                        Sign up as a fill in participant."),i("br"),e._v("You may be assigned a file if an ordinary participant skips a round.\n                      ")]),e._v(" "),e.currentUser?i("ApolloMutation",{attrs:{mutation:e.joinMutation,variables:{id:e.event.id},refetchQueries:e.refetchEvent},on:{error:e.onError,done:e.onDone},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.mutate;n.loading,n.error,n.gqlError;return[i("a",{staticClass:"join-button button is-primary",attrs:{href:"#"},on:{click:function(n){n.preventDefault(),e.joinEvent(e.event,t)}}},[i("span",{staticClass:"icon"},[i("icon",{attrs:{name:"sign-in-alt",scale:"1"}})],1),e._v("Join")])]}}])}):e._e()]:[e._v("\n                      Login required to join\n                    ")]],2):e._e()],2),e._v(" "),e.event.isAdministrator&&"Published"!=e.event.status?i("div",{class:{"event-current-roundsubmission":!0,column:!0,"is-half":!0}},[i("div",{staticClass:"card-title"},[e._v("Administration")]),e._v(" "),i("div",["Started"==e.event.status?i("table",{staticClass:"table"},[e.event.currentRound?i("tr",[i("th",[e._v("Round")]),i("td",[e._v(e._s(e.event.currentRound.index+1))])]):e._e(),e._v(" "),i("tr",[i("th",[e._v("Status")]),e._v(" "),i("td",[e._l(e.submissionStatuses(e.event),function(n,i){return[e._v("\n                            "+e._s(i)+" ("+e._s(n)+")\n                          ")]})],2)])]):e._e(),e._v(" "),i("div",{staticClass:"roundsubmission-actions"},[i("ApolloMutation",{attrs:{mutation:e.publishMutation,variables:{id:e.event.id},refetchQueries:e.refetchEvent},on:{error:e.onError,done:e.onDone},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.mutate;n.loading,n.error,n.gqlError;return["Completed"==e.event.status?i("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Publish the event so that the songs get released and the pages can be commented on",expression:"'Publish the event so that the songs get released and the pages can be commented on'"}],staticClass:"button is-primary",on:{click:function(n){n.preventDefault(),e.publishEvent(e.event,t)}}},[i("span",{staticClass:"icon"},[i("icon",{attrs:{name:"paper-plane",scale:"1"}})],1),e._v("\n                              Publish event\n                           ")]):e._e()]}}])}),e._v(" "),i("ApolloMutation",{attrs:{mutation:e.nextRoundMutation,variables:{id:e.event.id},refetchQueries:e.refetchEvent},on:{error:e.onError,done:e.onDone},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.mutate;n.loading,n.error,n.gqlError;return["Started"==e.event.status?i("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"End this round and start the next one with files getting passed on.",expression:"'End this round and start the next one with files getting passed on.'"}],staticClass:"button is-primary",on:{click:function(n){n.preventDefault(),e.nextEventRound(e.event,t)}}},[i("span",{staticClass:"icon"},[i("icon",{attrs:{name:"check",scale:"1"}})],1),e._v("\n                              End round\n                           ")]):e._e()]}}])}),e._v(" "),e.showRequestFillIns(e.event)?i("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Mark all unsubmitted roundsubmissions as skips and assign fill-ins where possible.",expression:"'Mark all unsubmitted roundsubmissions as skips and assign fill-ins where possible.'"}],staticClass:"button is-warning",on:{click:function(n){n.preventDefault(),e.requestFillIns(e.event,t)}}},[i("span",{staticClass:"icon"},[i("icon",{attrs:{name:"exchange-alt",scale:"1"}})],1),e._v("\n                          Request fill-ins\n                      ")]):e._e(),e._v(" "),!e.event.isPublic&&["Planned","Started"].includes(e.event.status)?i("ApolloMutation",{attrs:{mutation:e.inviteMutation,refetchQueries:e.refetchEvent},on:{error:e.onError,done:e.onDone},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.mutate;n.loading,n.error,n.gqlError;return["Started"==e.event.status?i("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Invite participant to see/join this event.",expression:"'Invite participant to see/join this event.'"}],staticClass:"button is-info",on:{click:function(n){n.preventDefault(),e.inviteUser(e.event,t)}}},[i("span",{staticClass:"icon"},[i("icon",{attrs:{name:"plus",scale:"1"}})],1),e._v("\n                              Invite participant\n                           ")]):e._e()]}}])}):e._e(),e._v(" "),"Planned"==e.event.status?[i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"This sets the file that the participants have to start with initially.",expression:"'This sets the file that the participants have to start with initially.'"}],staticClass:"file button is-info"},[i("label",{staticClass:"file-label",staticStyle:{"margin-top":"-5px"}},[i("form",{attrs:{enctype:"multipart/form-data",novalidate:""}},[i("input",{staticClass:"file-input",attrs:{type:"file",name:"initial"},on:{change:function(n){e.changeInitial(e.event.id,n.target.name,n.target.files,t)}}})]),e._v(" "),i("span",{staticClass:"file-cta",staticStyle:{"margin-top":"-1px"}},[i("span",{staticClass:"icon"},[i("icon",{attrs:{name:"exchange-alt",scale:"1"}})],1),e._v(" "),i("span",{staticClass:"file-label"},[e._v("\n                                "+e._s(e.event.initialFile?"Change":"Upload")+" initial file\n                              ")])])])]),e._v(" "),i("ApolloMutation",{attrs:{mutation:e.startEventMutation,variables:{id:e.event.id},refetchQueries:e.refetchEvent},on:{error:e.onError,done:e.onDone},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.mutate;n.loading,n.error,n.gqlError;return["Planned"==e.event.status&&e.event.numParticipants>1?i("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"This starts the event and generates the swap schedule. There's no turning back from when this is done.",expression:"'This starts the event and generates the swap schedule. There\\'s no turning back from when this is done.'"}],staticClass:"button is-primary",on:{click:function(n){n.preventDefault(),e.startEvent(e.event,t)}}},[i("span",{staticClass:"icon"},[i("icon",{attrs:{name:"play",scale:"1"}})],1),e._v("\n                                Start first round")]):e._e()]}}])})]:e._e()],2)])]):e._e()]),e._v(" "),e.event.roundsubmissions.length>0?i("div",{staticClass:"event-schedule"},[i("div",{staticClass:"card-title"},[e._v("Schedule")]),e._v(" "),i("swap-schedule",{attrs:{schedule:e.schedule,colorguide:!0}})],1):e._e(),e._v(" "),i("div",{staticClass:"event-description"},[i("div",{staticClass:"card-title"},[e._v("Description")]),e._v(" "),i("div",{domProps:{innerHTML:e._s(e.formatText(e.event.description))}})]),e._v(" "),"Published"==e.event.status||e.event.areChangesVisible?i("div",{staticClass:"comments"},[i("div",{staticClass:"card-title"},[e._v("Comments")]),e._v(" "),i("vue-disqus",{attrs:{shortname:"monsquaz-swap",identifier:"event-"+e.event.slug,url:e.currentUrl}})],1):e._e()])])],1)]:e._e()]}}])})},a=[];i.d(n,"a",function(){return t}),i.d(n,"b",function(){return a})},59:function(e,n,i){"use strict";i.r(n);var t=i(276),a=i(104);for(var r in a)"default"!==r&&function(e){i.d(n,e,function(){return a[e]})}(r);i(228);var s=i(4),o=Object(s.a)(a.default,t.a,t.b,!1,null,"a1f7f566",null);n.default=o.exports},77:function(e,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"userParts"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"gravatar"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"Variable",name:{kind:"Name",value:"gravatarSize"}}}],directives:[]}]}}],loc:{start:0,end:87}};i.loc.source={body:" fragment userParts on User {\n  id\n  slug\n  username\n  gravatar(size: $gravatarSize)\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=i},78:function(e,n,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Events"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"details"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"500"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"maxDescription"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"NullValue"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"gravatarSize"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"40"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filters"}},type:{kind:"NamedType",name:{kind:"Name",value:"EventsFilter"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sort"}},type:{kind:"NamedType",name:{kind:"Name",value:"EventsSortField"}},defaultValue:{kind:"EnumValue",value:"id"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"descending"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"events"},arguments:[{kind:"Argument",name:{kind:"Name",value:"selection"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"ObjectField",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"ObjectField",name:{kind:"Name",value:"sort"},value:{kind:"Variable",name:{kind:"Name",value:"sort"}}},{kind:"ObjectField",name:{kind:"Name",value:"descending"},value:{kind:"Variable",name:{kind:"Name",value:"descending"}}},{kind:"ObjectField",name:{kind:"Name",value:"filters"},value:{kind:"Variable",name:{kind:"Name",value:"filters"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[{kind:"Argument",name:{kind:"Name",value:"maxLength"},value:{kind:"Variable",name:{kind:"Name",value:"maxDescription"}}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentRound"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"index"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"currentRoundsubmission"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"roundsubmissionParts"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"numRounds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numParticipants"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roundsubmissions"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"details"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"roundsubmissionParts"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"participants"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"details"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"userParts"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"host"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"userParts"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"areChangesVisible"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isScheduleVisible"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isParticipant"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isAdministrator"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPublic"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AdministeredEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"initialFile"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sizeHuman"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"downloadUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"invitedUsers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"userParts"},directives:[]}]}}]}}]}}]}}],loc:{start:0,end:1210}};t.loc.source={body:'#import "./fragments/userParts.gql"\r\n#import "./fragments/roundsubmissionParts.gql"\r\n\r\nquery Events (\r\n  $details: Boolean = false,\r\n  $offset: Int = 0,\r\n  $limit: Int = 500,\r\n  $maxDescription: Int = null,\r\n  $gravatarSize: Int = 40,\r\n  $filters: EventsFilter,\r\n  $sort: EventsSortField = id,\r\n  $descending: Boolean = false\r\n) {\r\n  events(selection: {\r\n    offset: $offset,\r\n    limit: $limit,\r\n    sort: $sort,\r\n    descending: $descending,\r\n    filters: $filters\r\n  }) {\r\n    id\r\n    slug\r\n    name\r\n    status\r\n    description(maxLength: $maxDescription)\r\n    currentRound {\r\n      id\r\n      index\r\n    }\r\n    currentRoundsubmission {\r\n      ...roundsubmissionParts\r\n    }\r\n    numRounds\r\n    numParticipants\r\n    roundsubmissions @include(if: $details) {\r\n      ...roundsubmissionParts\r\n    }\r\n    participants @include(if: $details)  {\r\n      ...userParts\r\n    }\r\n    host {\r\n      ...userParts\r\n    }\r\n    areChangesVisible\r\n    isScheduleVisible\r\n    isParticipant\r\n    isAdministrator\r\n    isPublic\r\n    ... on AdministeredEvent {\r\n      initialFile {\r\n        id\r\n        filename\r\n        sizeHuman\r\n        downloadUrl\r\n      }\r\n      invitedUsers {\r\n        ...userParts\r\n      }\r\n    }\r\n  }\r\n}\r\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)})}t.definitions=t.definitions.concat(r(i(77).definitions)),t.definitions=t.definitions.concat(r(i(79).definitions));var s={};function o(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}t.definitions.forEach(function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})}(e,n),s[e.name.value]=n}}),e.exports=t,e.exports.Events=function(e,n){var i={kind:e.kind,definitions:[o(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);for(var t=s[n]||new Set,a=new Set,r=new Set(t);r.size>0;){var d=r;r=new Set,d.forEach(function(e){a.has(e)||(a.add(e),(s[e]||new Set).forEach(function(e){r.add(e)}))})}return a.forEach(function(n){var t=o(e,n);t&&i.definitions.push(t)}),i}(t,"Events")},79:function(e,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"roundsubmissionParts"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Roundsubmission"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"round"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"index"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"participant"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"userParts"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"originalParticipant"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"userParts"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"song"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"fileSeeded"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"downloadUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"fileSubmitted"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"downloadUrl"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:308}};i.loc.source={body:"fragment roundsubmissionParts on Roundsubmission {\n  id\n  status\n  round {\n    id\n    index\n  }\n  participant {\n    ...userParts\n  },\n  originalParticipant {\n    ...userParts\n  }\n  song { id }\n  fileSeeded {\n    id\n    filename\n    downloadUrl\n  }\n  fileSubmitted {\n    id\n    filename\n    downloadUrl\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=i},80:function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Users"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"500"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"gravatarSize"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"40"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sort"}},type:{kind:"NamedType",name:{kind:"Name",value:"UsersSortField"}},defaultValue:{kind:"EnumValue",value:"id"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"descending"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filters"}},type:{kind:"NamedType",name:{kind:"Name",value:"UsersFilter"}},defaultValue:{kind:"ObjectValue",fields:[]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"users"},arguments:[{kind:"Argument",name:{kind:"Name",value:"selection"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"ObjectField",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"ObjectField",name:{kind:"Name",value:"sort"},value:{kind:"Variable",name:{kind:"Name",value:"sort"}}},{kind:"ObjectField",name:{kind:"Name",value:"descending"},value:{kind:"Variable",name:{kind:"Name",value:"descending"}}},{kind:"ObjectField",name:{kind:"Name",value:"filters"},value:{kind:"Variable",name:{kind:"Name",value:"filters"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"gravatar"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"Variable",name:{kind:"Name",value:"gravatarSize"}}}],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AdministeredUser"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"firstname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lastname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"OwnedUser"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"firstname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lastname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:536}};i.loc.source={body:"query Users (\r\n  $offset: Int = 0,\r\n  $limit: Int = 500,\r\n  $gravatarSize: Int = 40,\r\n  $sort: UsersSortField = id,\r\n  $descending: Boolean = false,\r\n  $filters: UsersFilter = {}\r\n) {\r\n  users(selection: {\r\n    offset: $offset,\r\n    limit: $limit,\r\n    sort: $sort,\r\n    descending: $descending,\r\n    filters: $filters\r\n  }) {\r\n    id\r\n    slug\r\n    username\r\n    gravatar(size: $gravatarSize)\r\n    ... on AdministeredUser {\r\n      firstname lastname email\r\n    }\r\n    ... on OwnedUser {\r\n      firstname lastname email\r\n    }\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}i.definitions.forEach(function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})}(e,n),t[e.name.value]=n}}),e.exports=i,e.exports.Users=function(e,n){var i={kind:e.kind,definitions:[a(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);for(var r=t[n]||new Set,s=new Set,o=new Set(r);o.size>0;){var d=o;o=new Set,d.forEach(function(e){s.has(e)||(s.add(e),(t[e]||new Set).forEach(function(e){o.add(e)}))})}return s.forEach(function(n){var t=a(e,n);t&&i.definitions.push(t)}),i}(i,"Users")}}]);